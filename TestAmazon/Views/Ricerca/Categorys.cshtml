@model IEnumerable<TestAmazon.Models.Prodotto>
@using TestAmazon.Models;
@{
    ViewBag.Title = "Categoria";
    var categorie = ViewBag.Categorie as List<Categoria>;
}

<div style="text-align:center;"><a href="/"><img src="~/IMGS/logo.png" style="border-radius: 10px;margin:20px" /></a></div>


<div class="container" name="body_container">
    <div class="container" style="padding:10px;margin:10px" name="pagebuttons_container">
        @*Qui ci metto il tasto di ricerca*@
        @using (Html.BeginForm())
        {
            <div class="row  text-center" style="width:100%">
                <div class="col-lg-2" style="margin:10px;float:left">
                    <select name="searchCategory" style="height:26px">
                        <option value="0">Tutte:</option>
                        @foreach (var categoria in categorie)
                        {
                            if (ViewBag.id_category != null && (long)ViewBag.id_category == categoria.Id_Categoria)
                            {
                                <option value="@categoria.Id_Categoria" selected>
                                    @categoria.Nome_cat
                                </option>
                            }
                            else
                            {
                                <option value="@categoria.Id_Categoria">
                                    @categoria.Nome_cat
                                </option>
                            }
                        }
                    </select>
                    </div>
                <div class="col-lg-2"  style="margin:10px;float:left">
                    @if (ViewBag.searchtext != null)
                    {
                    <input type="text" name="searchText" placeholder="Cerca:" value="@ViewBag.searchtext" />
                    }
                    else
                    {
                    <input type="text" name="searchText" placeholder="Cerca:" />
                    }
                </div>
                <div class="col-lg-3"  style="margin:10px;float:right">
                    <button type="submit" class="btn">Cerca</button>
                </div>
            </div>
         }
    </div>
    <div class="container  text-center" style="border-radius: 10px; border-color: rgb(204,204,204); min-width:400px" name="grid_container">
        @{
            List<Prodotto> prodotti = Model.ToList();

            // 3 elementi per riga
            if (Model != null && Model.Any())
            {
                foreach (var product in Model)
                {
                    string id_product_button = $"product{product.Id_Prodotto}";
                    string onclick = $"window.location.href='../Prodotto/Singolo/{product.Id_Prodotto}'";

                    <div id="@id_product_button" class="checkbox-inline prodotto text-center" onclick="@onclick" onmouseover="onMouseOver('@id_product_button')" onmouseleave="onMouseLeft('@id_product_button')">
                        <div name="container_img" class="row" style="height:80%;min-width:125px">
                            <div class="col-lg-10">
                                <img src="@product.IMG" class="img_thumb" />
                            </div>
                        </div>
                        <div name="container_nameProduct" class="row" style="height:10%;min-height:30px;">
                            <div class="col-lg-10">
                                <p>@product.Nome</p>
                            </div>
                        </div>
                        <div name="container_PriceProduct" class="row" style="height: 10%; min-height: 30px;">
                            <div class="col-lg-10">
                                <p>@product.Prezzo €</p>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <h1>Nessun Prodotto presente</h1>
            }

        }
    </div>
</div>